<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nháº¯c nhá»Ÿ | Smart Finance</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/reminders.css">
</head>
<body>

<div class="container">
  <!-- Header -->
  <header class="header">
    <h1 class="header-title">Smart Finance</h1>
    <div class="user-info">
      <span class="user-icon">ğŸ‘¤</span>
      <span id="userEmail" class="user-name">TÃ i khoáº£n</span>
    </div>
  </header>

  <!-- Sidebar -->
  <aside class="sidebar">
    <nav class="sidebar-nav">
      <a href="index.html" class="nav-item">
        <span class="nav-icon">ğŸ </span>
        <span>Tá»•ng Quan</span>
      </a>
      <a href="index.html" class="nav-item">
        <span class="nav-icon">ğŸƒ</span>
        <span>Thu chi</span>
      </a>
      <a href="index.html" class="nav-item">
        <span class="nav-icon">ğŸ’°</span>
        <span>Sá»‘ giao dá»‹ch</span>
      </a>
      <a href="reminders.html" class="nav-item active">
        <span class="nav-icon">ğŸ””</span>
        <span>Nháº¯c nhá»Ÿ</span>
      </a>
      <a href="index.html" class="nav-item">
        <span class="nav-icon">ğŸ“Š</span>
        <span>NgÃ¢n sÃ¡ch</span>
      </a>
      <a href="index.html" class="nav-item">
        <span class="nav-icon">âš™ï¸</span>
        <span>CÃ i Ä‘áº·t</span>
      </a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <div class="content-header">
      <h2 class="page-title">
        <span class="title-icon">ğŸ””</span>
        Nháº¯c Thanh ToÃ¡n HÃ³a ÄÆ¡n
      </h2>
    </div>

    <!-- Google Calendar Integration -->
    <div class="calendar-section">
      <p class="calendar-text">
        Äá»ƒ Ä‘á»“ng bá»™ lá»‹ch thanh toÃ¡n, hÃ£y káº¿t ná»‘i vá»›i Google Calendar:
      </p>
      <button id="connectCalendarBtn" class="btn-connect-calendar">
        <span class="btn-icon">ğŸ”—</span>
        Káº¿t ná»‘i Google Calendar
      </button>
      <div id="calendarStatus" class="calendar-status" style="display: none;"></div>
    </div>

    <!-- Reminder Form -->
    <div class="reminder-form-container">
      <form id="reminderForm" class="reminder-form">
        <div class="form-row">
          <div class="form-group">
            <label for="billName">TÃªn hÃ³a Ä‘Æ¡n</label>
            <input 
              type="text" 
              id="billName" 
              name="billName" 
              placeholder="VD: Tiá»n Ä‘iá»‡n thÃ¡ng 11"
              required
            />
            <span id="error-billName" class="error-text" style="display: none;"></span>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="notes">Ghi chÃº...</label>
            <input 
              type="text" 
              id="notes" 
              name="notes" 
              placeholder="Ghi chÃº thÃªm vá» hÃ³a Ä‘Æ¡n..."
            />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="reminderDate">NgÃ y giá» nháº¯c nhá»Ÿ</label>
            <div class="date-time-input">
              <input 
                type="datetime-local" 
                id="reminderDate" 
                name="reminderDate"
                required
              />
            </div>
            <span id="error-reminderDate" class="error-text" style="display: none;"></span>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group amount-group">
            <label for="amount">Sá»‘ tiá»n (VND)</label>
            <div class="amount-input-wrapper">
              <input 
                type="number" 
                id="amount" 
                name="amount" 
                placeholder="0"
                min="0"
                step="1000"
                required
              />
            </div>
            <span id="error-amount" class="error-text" style="display: none;"></span>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="repeat">Láº­p láº¡i</label>
            <select id="repeat" name="repeat">
              <option value="none">KhÃ´ng láº­p</option>
              <option value="daily">HÃ ng ngÃ y</option>
              <option value="weekly">HÃ ng tuáº§n</option>
              <option value="monthly">HÃ ng thÃ¡ng</option>
              <option value="yearly">HÃ ng nÄƒm</option>
            </select>
          </div>
        </div>

        <div id="formMessage" class="form-message" style="display: none;"></div>

        <button type="submit" class="btn-add-reminder">
          <span class="btn-icon">+</span>
          ThÃªm Nháº¯c
        </button>
      </form>
    </div>

    <!-- Reminders List -->
    <div class="reminders-section">
      <h3 class="section-title">Danh sÃ¡ch nháº¯c nhá»Ÿ</h3>
      <div id="remindersList" class="reminders-list">
        <!-- Reminders will be loaded here -->
        <div class="empty-state">
          <p>ChÆ°a cÃ³ nháº¯c nhá»Ÿ nÃ o. HÃ£y thÃªm nháº¯c nhá»Ÿ Ä‘áº§u tiÃªn!</p>
        </div>
      </div>
    </div>
  </main>
</div>

<!-- Floating Action Button (Chatbot) -->
<div class="fab">
  <button class="fab-btn">ğŸ¤–</button>
</div>

<!-- Load Firebase -->
<script type="module">
  import { auth } from "../js/firebase.js";
  import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  // Kiá»ƒm tra tráº¡ng thÃ¡i Ä‘Äƒng nháº­p
  onAuthStateChanged(auth, (user) => {
    if (!user) {
      window.location.href = "login.html";
      return;
    }
    const emailEl = document.getElementById("userEmail");
    if (emailEl) {
      emailEl.textContent = user.email || user.displayName || "TÃ i khoáº£n";
    }
  });
</script>

<!-- Load Reminders Script -->
<script type="module" src="../js/reminders.js"></script>

</body>
</html>
